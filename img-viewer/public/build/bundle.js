var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let r,a;function s(t,e){return r||(r=document.createElement("a")),r.href=e,t===r.href}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e,n){t.classList[n?"add":"remove"](e)}function x(t){a=t}function w(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const $=[],v=[],k=[],_=[],q=Promise.resolve();let P=!1;function E(t){k.push(t)}const j=new Set;let O=0;function M(){const t=a;do{for(;O<$.length;){const t=$[O];O++,x(t),C(t.$$)}for(x(null),$.length=0,O=0;v.length;)v.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];j.has(e)||(j.add(e),e())}k.length=0}while($.length);for(;_.length;)_.pop()();P=!1,j.clear(),x(t)}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const I=new Set;function A(t,e){t&&t.i&&(I.delete(t),t.i(e))}const F="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function L(t,n,l,r){const{fragment:a,on_mount:s,on_destroy:c,after_update:u}=t.$$;a&&a.m(n,l),r||E((()=>{const n=s.map(e).filter(i);c?c.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(E)}function R(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&($.push(t),P||(P=!0,q.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(e,i,l,r,s,c,u,p=[-1]){const d=a;x(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:i.target||d.$$.root};u&&u(m.root);let g=!1;if(m.ctx=l?l(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&s(m.ctx[t],m.ctx[t]=i)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](i),g&&Y(e,t)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!r&&r(m.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);m.fragment&&m.fragment.l(t),t.forEach(f)}else m.fragment&&m.fragment.c();i.intro&&A(e.$$.fragment),L(e,i.target,i.anchor,i.customElement),M()}x(d)}class z{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function N(e){let n,i,l,r,a,s,b;return{c(){n=p("div"),i=p("h4"),i.textContent="Install",l=m(),r=p("button"),r.innerHTML="<span>Ã—</span>",a=d("\r\n    Click here to install the app for more features!"),h(i,"class","alert-heading"),h(r,"class","close"),h(r,"type","button"),h(n,"class","alert alert-success filled-dm show svelte-1qjuqpq")},m(t,o){u(t,n,o),c(n,i),c(n,l),c(n,r),c(n,a),s||(b=[g(r,"click",e[2]),g(n,"click",e[1])],s=!0)},p:t,d(t){t&&f(n),s=!1,o(b)}}}function T(e){let n,o=e[0]&&N(e);return{c(){o&&o.c(),n=d("")},m(t,e){o&&o.m(t,e),u(t,n,e)},p(t,[e]){t[0]?o?o.p(t,e):(o=N(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&f(n)}}}function B(t,e,n){let o;return window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),n(0,o=t)})),[o,async function(){o.prompt();const{outcome:t}=await o.userChoice;"accepted"===t&&n(0,o=null)},function(){n(0,o=null)}]}class D extends z{constructor(t){super(),S(this,t,B,T,l,{})}}const X=["3g2","3gp","asf","avi","dv","flv","gxf","m2ts","m4a","m4b","m4p","m4r","m4v","mkv","mov","mp4","mpd","mpeg","mpg","mxf","nut","ogm","ogv","swf","ts","vob","webm","wmv","wtv"],U=new RegExp(`.(${X.join("|")})$`,"i"),H=["srt","vtt","ass","ssa","sub","txt"],G=new RegExp(`.(${H.join("|")})$`,"i"),Q=["3gp","3gpp","3g2","aac","adts","ac3","amr","eac3","flac","mp3","m4a","mp4","mp4a","mpga","mp2","mp2a","mp3","m2a","m3a","oga","ogg","mogg","spx","opus","raw","wav","weba"],W=new RegExp(`.(${Q.join("|")})$`,"i"),K=["apng","avif","bmp","gif","ico","jpg","jpeg","jfif","pjpeg","pjp","png","svg","tif","tiff","webp"],V=new RegExp(`.(${K.join("|")})$`,"i"),J=["epub","cbr","cba","cbt","cbz","cb7","zip"],Z=new RegExp(`.(${J.join("|")})$`,"i"),tt=(new DOMParser).parseFromString.bind(new DOMParser);async function et(t=[],e=[]){const n=await Promise.all([...t].map((t=>async function(t,e){if(!t)return null;if(t.type){if(e.some((e=>0===t.type.indexOf(e))))return t.getAsFile();if("text/plain"===t.type){if("string"===t.kind){const n=await new Promise((e=>t.getAsString(e)));try{const t=new URL(n),o=e.find((t=>n.match(nt[t])));if(t&&o)return{url:n,name:n.substring(n.lastIndexOf("/")+1),type:o}}catch(t){}return null}if("file"===t.kind){const n=t.getAsFile();if(e.some((t=>n.name.match(nt[t]))))return n}return null}if("text/html"===t.type){const n=await new Promise((e=>t.getAsString(e))),o=e.map((t=>tt(n,"text/html").querySelectorAll(it[t]||t))).flat();return o.length?o.map((t=>{const e=t.src||t.value;return e?{url:e,name:e.substring(e.lastIndexOf("/")+1)}:null})):null}}const n=t.webkitGetAsEntry();if(n?.isDirectory){const t=(await new Promise((t=>n.createReader().readEntries(t)))).filter((t=>t.isFile&&e.some((e=>t.name.match(nt[e]))))).map((t=>new Promise((e=>t.file(e)))));return Promise.all(t)}if(n?.isFile&&e.some((t=>n.name.match(nt[t]))))return new Promise((t=>n.file(t)))}(t,e))));return n.flat().filter((t=>t))}const nt={audio:W,video:U,image:V,subtitle:G,book:Z},ot={audio:Q,video:X,image:K,subtitle:H,book:J},it={image:"img",subtitle:"input"};const{window:lt}=F;function rt(e){let n,i,l,r,a,s;return{c(){n=p("div"),i=p("button"),i.textContent="arrow_back",l=m(),r=p("button"),r.textContent="arrow_forward",h(i,"class","btn btn-lg btn-square material-icons"),h(i,"type","button"),h(r,"class","btn btn-lg btn-square material-icons"),h(r,"type","button"),h(n,"class","btn-group bg-dark-dm bg-light-lm rounded m-5 col-auto")},m(t,o){u(t,n,o),c(n,i),c(n,l),c(n,r),a||(s=[g(i,"click",e[13]),g(r,"click",e[12])],a=!0)},p:t,d(t){t&&f(n),a=!1,o(s)}}}function at(t){let e,n,i,l,r,a,x,w,$,v,k,_,q,P,E,j,O,M,C,F,Y,S,z,N,T,B,X,U,H,G,Q,W,K,V,J,Z=t[3]?"blur_off":"blur_on";n=new D({});let tt=t[7].length>1&&rt(t);return document.title=W=t[4]+" "+(t[6].x&&t[6].y?`(${t[6].x} x ${t[6].y})`:"")+" "+t[9](t[5]),{c(){var o;e=p("div"),(o=n.$$.fragment)&&o.c(),i=m(),l=p("div"),r=p("img"),x=m(),w=p("div"),tt&&tt.c(),$=m(),v=p("div"),k=p("button"),k.textContent="zoom_out_map",_=m(),q=p("button"),q.textContent="remove",P=m(),E=p("input"),O=m(),M=p("button"),M.textContent="add",C=m(),F=p("div"),Y=p("button"),S=d(Z),z=m(),N=p("button"),N.textContent="rotate_left",T=m(),B=p("button"),B.textContent="rotate_right",X=m(),U=p("button"),U.innerHTML='<div class="flip svelte-1w5qlh3">flip</div>',H=m(),G=p("button"),G.textContent="flip",Q=m(),h(e,"class","sticky-alerts d-flex flex-column-reverse svelte-1w5qlh3"),s(r.src,a=t[1])||h(r,"src",a),h(r,"alt","view"),h(r,"class","w-full h-full position-absolute svelte-1w5qlh3"),y(r,"transition",t[8]),h(l,"class","w-full h-full overflow-hidden position-relative dragarea svelte-1w5qlh3"),h(k,"class","btn btn-lg btn-square material-icons svelte-1w5qlh3"),h(k,"type","button"),h(q,"class","btn btn-lg btn-square material-icons svelte-1w5qlh3"),h(q,"type","button"),h(E,"type","number"),h(E,"step","0.1"),h(E,"min","0.1"),h(E,"class","form-control form-control-lg text-right svelte-1w5qlh3"),h(E,"placeholder","Scale"),E.readOnly=!0,E.value=j=t[0].toFixed(1),h(M,"class","btn btn-lg btn-square material-icons svelte-1w5qlh3"),h(M,"type","button"),h(v,"class","btn-group input-group bg-dark-dm bg-light-lm rounded m-5 w-200 col-auto svelte-1w5qlh3"),h(Y,"class","btn btn-lg btn-square material-icons"),h(Y,"type","button"),h(N,"class","btn btn-lg btn-square material-icons"),h(N,"type","button"),h(B,"class","btn btn-lg btn-square material-icons"),h(B,"type","button"),h(U,"class","btn btn-lg btn-square material-icons"),h(U,"type","button"),h(G,"class","btn btn-lg btn-square material-icons"),h(G,"type","button"),h(F,"class","btn-group bg-dark-dm bg-light-lm rounded m-5 col-auto"),h(w,"class","position-absolute buttons row w-full justify-content-center svelte-1w5qlh3")},m(o,a){u(o,e,a),L(n,e,null),u(o,i,a),u(o,l,a),c(l,r),t[35](r),u(o,x,a),u(o,w,a),tt&&tt.m(w,null),c(w,$),c(w,v),c(v,k),c(v,_),c(v,q),c(v,P),c(v,E),c(v,O),c(v,M),c(w,C),c(w,F),c(F,Y),c(Y,S),c(F,z),c(F,N),c(F,T),c(F,B),c(F,X),c(F,U),c(F,H),c(F,G),u(o,Q,a),K=!0,V||(J=[g(lt,"drop",b(t[17])),g(lt,"dragenter",b(t[31])),g(lt,"dragover",b(t[32])),g(lt,"dragstart",b(t[33])),g(lt,"dragleave",b(t[34])),g(lt,"paste",b(t[17])),g(r,"load",t[21]),g(l,"pointerdown",t[10]),g(l,"pointerup",t[11]),g(l,"wheel",t[16],{passive:!0}),g(l,"touchend",t[11]),g(l,"touchstart",t[14]),g(l,"touchmove",t[15]),g(l,"click",t[18]),g(k,"click",t[20]),g(q,"click",t[36]),g(M,"click",t[37]),g(Y,"click",t[19]),g(N,"click",t[22]),g(B,"click",t[23]),g(U,"click",t[24]),g(G,"click",t[25])],V=!0)},p(t,e){(!K||2&e[0]&&!s(r.src,a=t[1]))&&h(r,"src",a),256&e[0]&&y(r,"transition",t[8]),t[7].length>1?tt?tt.p(t,e):(tt=rt(t),tt.c(),tt.m(w,$)):tt&&(tt.d(1),tt=null),(!K||1&e[0]&&j!==(j=t[0].toFixed(1))&&E.value!==j)&&(E.value=j),(!K||8&e[0])&&Z!==(Z=t[3]?"blur_off":"blur_on")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(S,Z),(!K||624&e[0])&&W!==(W=t[4]+" "+(t[6].x&&t[6].y?`(${t[6].x} x ${t[6].y})`:"")+" "+t[9](t[5]))&&(document.title=W)},i(t){K||(A(n.$$.fragment,t),K=!0)},o(t){!function(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),(void 0).c.push((()=>{I.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}(n.$$.fragment,t),K=!1},d(r){r&&f(e),R(n),r&&f(i),r&&f(l),t[35](null),r&&f(x),r&&f(w),tt&&tt.d(),r&&f(Q),V=!1,o(J)}}}function st(t,e,n){let o=null,i=null,l=0,r=!0,a="Image Viewer",s=null;const c={x:0,y:0},u={x:0,y:0},f={x:0,y:0};let p=c;const d={x:null,y:null},m=[" B"," KB"," MB"," GB"];let g=[],b=null;navigator.serviceWorker.register("/sw.js");let h=!0;function y(t){x||(f.x=u.x+t.clientX-c.x,f.y=u.y+t.clientY-c.y,n(26,p=f))}let x=!1;let $=0,k=0;let _=1;function q({deltaY:t}){const e=-.01*t;e<0?(l<-4||(l-=.5),u.x/=1.5,u.y/=1.5):e>0&&!(l>11)&&(l+=.5,u.x*=1.5,u.y*=1.5),n(0,_=2**l),n(26,p=u)}function P(t){if(t?.length){for(const e of t)e instanceof File&&(e.url=URL.createObjectURL(e));n(7,g=g.concat(t)),b||n(27,b=g[0])}}"launchQueue"in window&&async function(){return new Promise((t=>{launchQueue.setConsumer((async e=>{if(!e.files.length)return;const n=e.files.map((t=>t.getFile()));t((await Promise.all(n)).filter(((t,e,n)=>n.findIndex((e=>e.name===t.name&&e.size===t.size&&e.lastModified===t.lastModified))===e)))}))}))}().then(P),P(function(t){const e=[...new URLSearchParams(location.search)];if(!e.length)return null;const n=[];for(const o of e)if(t.find((t=>o[1].match(nt[t])))){const t=o[1].substring(Math.max(o[1].lastIndexOf("\\")+2,o[1].lastIndexOf("/")+1));n.push({name:t,url:o[1]})}return n}(["image"]));let E=0;let j=!1;let O=!1;return t.$$.update=()=>{134217728&t.$$.dirty[0]&&function(t){if(t)if(t.constructor===String){const e=Math.max(t.lastIndexOf("\\"),t.lastIndexOf("/"))+1;n(4,a=t.substring(e)),n(5,s=null),n(1,o=t)}else{const e=Math.max(t.name.lastIndexOf("\\"),t.name.lastIndexOf("/"))+1;n(4,a=t.name.substring(e)),n(5,s=t.size),n(1,o=t.url)}}(b),1946157057&t.$$.dirty[0]&&function({disPos:t,mirror:e,flip:n,rotation:o,zoom:l}){i?.style.setProperty("transform",`rotate(${o}deg) scaleX(${e?-1:1}) scaleY(${n?-1:1}) scale(${l})`),i?.style.setProperty("--left",t.x+"px"),i?.style.setProperty("--top",t.y+"px")}({disPos:p,mirror:O,flip:j,rotation:E,zoom:_})},[_,o,i,r,a,s,d,g,h,function(t){if(isNaN(t)||null==t)return"";if(t<1)return t+" B";const e=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),m.length-1);return Number((t/Math.pow(1e3,e)).toFixed(2))+m[e]},function(t){n(8,h=!1),c.x=t.clientX,c.y=t.clientY,n(2,i.onpointermove=y,i),t.pointerId&&i.setPointerCapture(t.pointerId)},function(t){i.onpointermove&&(n(8,h=!0),n(2,i.onpointermove=null,i),t.pointerId&&i.releasePointerCapture(t.pointerId),x?(x=!1,$=0):(u.x+=t.clientX-c.x,u.y+=t.clientY-c.y))},function(){n(27,b=g[(g.indexOf(b)+1)%g.length])},function(){const t=g.indexOf(b);n(27,b=g[0===t?g.length-1:t-1])},function({touches:t}){2===t.length&&(x=!0,n(8,h=!0))},function({touches:t}){if(2===t.length&&!0===x){const e=$;$=Math.hypot(t[0].pageX-t[1].pageX,t[0].pageY-t[1].pageY),k+=e-$,(k>20||k<-20)&&(q({deltaY:k>0?100:-100}),k=0)}},q,async function({dataTransfer:t,clipboardData:e}){const n=e?.items||t?.items;n&&P(await et(n,["image"]))},async function(){g.length||P(await function(t=[]){return new Promise((e=>{let n=document.createElement("input");n.type="file",n.multiple="multiple",n.accept=t.map((t=>"."+ot[t].join(",."))).flat(),n.onchange=async({target:t})=>{e([...t.files]),n=null},n.click()}))}(["image"]))},function(){n(3,r=!r),i.style.setProperty("--pixel",r?"crisp-edges":"pixelated")},function(){u.x=0,u.y=0,l=0,n(0,_=1),n(26,p=u)},function(){n(6,d.x=i.naturalWidth,d),n(6,d.y=i.naturalHeight,d)},function(){n(28,E-=90)},function(){n(28,E+=90)},function(){n(29,j=!j)},function(){n(30,O=!O)},p,b,E,j,O,function(e){w.call(this,t,e)},function(e){w.call(this,t,e)},function(e){w.call(this,t,e)},function(e){w.call(this,t,e)},function(t){v[t?"unshift":"push"]((()=>{i=t,n(2,i)}))},()=>q({deltaY:100}),()=>q({deltaY:-100})]}return new class extends z{constructor(t){super(),S(this,t,st,at,l,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
