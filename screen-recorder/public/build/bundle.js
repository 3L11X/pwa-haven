var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function a(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function s(e){return document.createTextNode(e)}function m(){return s(" ")}function u(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function l(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}let d;function f(e){d=e}const g=[],h=[],U=[],C=[],S=Promise.resolve();let T=!1;function D(e){U.push(e)}let k=!1;const B=new Set;function v(){if(!k){k=!0;do{for(let e=0;e<g.length;e+=1){const t=g[e];f(t),b(t.$$)}for(f(null),g.length=0;h.length;)h.pop()();for(let e=0;e<U.length;e+=1){const t=U[e];B.has(t)||(B.add(t),t())}U.length=0}while(g.length);for(;C.length;)C.pop()();T=!1,k=!1,B.clear()}}function b(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const w=new Set;function x(e,t){e&&e.i&&(w.delete(e),e.i(t))}function F(e,n,r,o){const{fragment:p,on_mount:y,on_destroy:c,after_update:s}=e.$$;p&&p.m(n,r),o||D((()=>{const n=y.map(t).filter(i);c?c.push(...n):a(n),e.$$.on_mount=[]})),s.forEach(D)}function I(e,t){const n=e.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $(e,t){-1===e.$$.dirty[0]&&(g.push(e),T||(T=!0,S.then(v)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function E(t,i,r,o,p,c,s,m=[-1]){const u=d;f(t);const l=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:p,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(u?u.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:i.target||u.$$.root};s&&s(l.root);let g=!1;if(l.ctx=r?r(t,i.props||{},((e,n,...a)=>{const i=a.length?a[0]:n;return l.ctx&&p(l.ctx[e],l.ctx[e]=i)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](i),g&&$(t,e)),n})):[],l.update(),g=!0,a(l.before_update),l.fragment=!!o&&o(l.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);l.fragment&&l.fragment.l(e),e.forEach(y)}else l.fragment&&l.fragment.c();i.intro&&x(t.$$.fragment),F(t,i.target,i.anchor,i.customElement),v()}f(u)}class A{$destroy(){I(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function P(t){let n,i,r,d,f,g,h;return{c(){n=c("div"),i=c("h4"),i.textContent="Install",r=m(),d=c("button"),d.innerHTML="<span>Ã—</span>",f=s("\r\n    Click here to install the app for more features!"),l(i,"class","alert-heading"),l(d,"class","close"),l(d,"type","button"),l(n,"class","alert alert-success filled-dm show svelte-1qjuqpq")},m(e,a){p(e,n,a),o(n,i),o(n,r),o(n,d),o(n,f),g||(h=[u(d,"click",t[2]),u(n,"click",t[1])],g=!0)},p:e,d(e){e&&y(n),g=!1,a(h)}}}function R(t){let n,a=t[0]&&P(t);return{c(){a&&a.c(),n=s("")},m(e,t){a&&a.m(e,t),p(e,n,t)},p(e,[t]){e[0]?a?a.p(e,t):(a=P(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&y(n)}}}function M(e,t,n){let a;return window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),n(0,a=e)})),[a,async function(){a.prompt();const{outcome:e}=await a.userChoice;"accepted"===e&&n(0,a=null)},function(){n(0,a=null)}]}class L extends A{constructor(e){super(),E(this,e,M,R,r,{})}}var _,V,N=(_=function(e){var t;t=function(){var e={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e}function n(e,t){this.name=e||"Unknown",this.type=t||"Unknown"}function a(e,t){n.call(this,e,t||"Uint")}function i(e){return e.length%2==1?"0"+e:e}function r(e,t){n.call(this,e,t||"Float")}function o(e,t){n.call(this,e,t||"Container")}function p(e){o.call(this,"File","File"),this.setSource(e)}return n.prototype.updateBySource=function(){},n.prototype.setSource=function(e){this.source=e,this.updateBySource()},n.prototype.updateByData=function(){},n.prototype.setData=function(e){this.data=e,this.updateByData()},t(a,n),a.prototype.updateBySource=function(){this.data="";for(var e=0;e<this.source.length;e++){var t=this.source[e].toString(16);this.data+=i(t)}},a.prototype.updateByData=function(){var e=this.data.length/2;this.source=new Uint8Array(e);for(var t=0;t<e;t++){var n=this.data.substr(2*t,2);this.source[t]=parseInt(n,16)}},a.prototype.getValue=function(){return parseInt(this.data,16)},a.prototype.setValue=function(e){this.setData(i(e.toString(16)))},t(r,n),r.prototype.getFloatArrayType=function(){return this.source&&4===this.source.length?Float32Array:Float64Array},r.prototype.updateBySource=function(){var e=this.source.reverse(),t=new(this.getFloatArrayType())(e.buffer);this.data=t[0]},r.prototype.updateByData=function(){var e=new(this.getFloatArrayType())([this.data]),t=new Uint8Array(e.buffer);this.source=t.reverse()},r.prototype.getValue=function(){return this.data},r.prototype.setValue=function(e){this.setData(e)},t(o,n),o.prototype.readByte=function(){return this.source[this.offset++]},o.prototype.readUint=function(){for(var e=this.readByte(),t=8-e.toString(2).length,n=e-(1<<7-t),a=0;a<t;a++)n*=256,n+=this.readByte();return n},o.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=p){var t=this.readUint(),i=this.readUint(),p=Math.min(this.offset+i,this.source.length),y=this.source.slice(this.offset,p),c=e[t]||{name:"Unknown",type:"Unknown"},s=n;switch(c.type){case"Container":s=o;break;case"Uint":s=a;break;case"Float":s=r}var m=new s(c.name,c.type);m.setSource(y),this.data.push({id:t,idHex:t.toString(16),data:m})}},o.prototype.writeUint=function(e,t){for(var n=1,a=128;e>=a&&n<8;n++,a*=128);if(!t)for(var i=a+e,r=n-1;r>=0;r--){var o=i%256;this.source[this.offset+r]=o,i=(i-o)/256}this.offset+=n},o.prototype.writeSections=function(e){this.offset=0;for(var t=0;t<this.data.length;t++){var n=this.data[t],a=n.data.source,i=a.length;this.writeUint(n.id,e),this.writeUint(i,e),e||this.source.set(a,this.offset),this.offset+=i}return this.offset},o.prototype.updateByData=function(){var e=this.writeSections("draft");this.source=new Uint8Array(e),this.writeSections()},o.prototype.getSectionById=function(e){for(var t=0;t<this.data.length;t++){var n=this.data[t];if(n.id===e)return n.data}return null},t(p,o),p.prototype.fixDuration=function(e,t){var n=t&&t.logger;void 0===n?n=function(e){console.log(e)}:n||(n=function(){});var a=this.getSectionById(139690087);if(!a)return n("[fix-webm-duration] Segment section is missing"),!1;var i=a.getSectionById(88713574);if(!i)return n("[fix-webm-duration] Info section is missing"),!1;var o=i.getSectionById(710577);if(!o)return n("[fix-webm-duration] TimecodeScale section is missing"),!1;var p=i.getSectionById(1161);if(p){if(!(p.getValue()<=0))return n("[fix-webm-duration] Duration section is present"),!1;n("[fix-webm-duration] Duration section is present, but the value is empty"),p.setValue(e)}else n("[fix-webm-duration] Duration section is missing"),(p=new r("Duration","Float")).setValue(e),i.data.push({id:1161,data:p});return o.setValue(1e6),i.updateByData(),a.updateByData(),this.updateByData(),!0},p.prototype.toBlob=function(e){return new Blob([this.source.buffer],{type:e||"video/webm"})},function e(t,n,a,i){if("object"==typeof a&&(i=a,a=void 0),!a)return new Promise((function(a){e(t,n,a,i)}));try{var r=new FileReader;r.onloadend=function(){try{var e=new p(new Uint8Array(r.result));e.fixDuration(n,i)&&(t=e.toBlob(t.type))}catch(e){}a(t)},r.readAsArrayBuffer(t)}catch(e){a(t)}}},e.exports?e.exports=t():window.ysFixWebmDuration=t()},_(V={exports:{}},V.exports),V.exports);function O(t){let n,a,i,r,s,d,f,g,h,U,C;return a=new L({}),{c(){var e;n=c("div"),(e=a.$$.fragment)&&e.c(),i=m(),r=c("div"),s=c("button"),d=m(),f=c("a"),g=m(),l(n,"class","sticky-alerts d-flex flex-column-reverse svelte-x1j1gs"),l(s,"class","btn"),l(r,"class","w-full h-full overflow-hidden position-relative dragarea"),document.title="Screen Recorder"},m(e,y){p(e,n,y),F(a,n,null),p(e,i,y),p(e,r,y),o(r,s),o(r,d),o(r,f),t[2](f),p(e,g,y),h=!0,U||(C=u(s,"click",t[1]),U=!0)},p:e,i(e){h||(x(a.$$.fragment,e),h=!0)},o(e){!function(e,t,n,a){if(e&&e.o){if(w.has(e))return;w.add(e),(void 0).c.push((()=>{w.delete(e),a&&(n&&e.d(1),a())})),e.o(t)}}(a.$$.fragment,e),h=!1},d(e){e&&y(n),I(a),e&&y(i),e&&y(r),t[2](null),e&&y(g),U=!1,C()}}}function j(e,t,n){let a;navigator.serviceWorker.register("/sw.js");let i,r=null;return[a,async function(){if(i)return i.stop();const e=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:60,cursor:"always"},audio:{sampleSize:256,channelCount:2,echoCancellation:!1}});e.oninactive=()=>{t.getAudioTracks()[0].stop()},console.log(e);const t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});let o=[...e.getTracks(),t.getAudioTracks()[0]];!function({stream:e,mimeType:t}){let o=[];i=new MediaRecorder(e,{audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:"video/x-matroska"}),i.ondataavailable=function(e){e.data.size>0&&o.push(e.data)},i.onstop=async function(){const t=Date.now()-r,i=new Blob(o);for(const t of e.getTracks())t.stop();N(i.slice(0,64),t,(e=>{console.log(e,t);const r=new Blob([e,i.slice(64)]);n(0,a.href=URL.createObjectURL(r),a),n(0,a.download=`${Date.now()}.mkv`,a),a.click()}))},i.start(200),r=Date.now()}({stream:new MediaStream(o),mimeType:"video/x-matroska"})},function(e){h[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}return new class extends A{constructor(e){super(),E(this,e,j,O,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
