var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let r;function s(t,e){return r||(r=document.createElement("a")),r.href=e,t===r.href}let a,c="undefined"!=typeof window?t=>requestAnimationFrame(t):t;function u(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function b(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function _(t){a=t}function k(){const t=function(){if(!a)throw new Error("Function called outside component initialization");return a}();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,i)}))}}}function O(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const E=[],P=[],L=[],z=[],A=Promise.resolve();let R=!1;function N(t){L.push(t)}function U(t){z.push(t)}let j=!1;const M=new Set;function C(){if(!j){j=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];_(e),q(e.$$)}for(_(null),E.length=0;P.length;)P.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];M.has(e)||(M.add(e),e())}L.length=0}while(E.length);for(;z.length;)z.pop()();R=!1,j=!1,M.clear()}}function q(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const F=new Set;function T(t,e){t&&t.i&&(F.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),undefined.c.push((()=>{F.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const S="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function I(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Q(t){t&&t.c()}function B(t,n,l,r){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,l),r||N((()=>{const n=a.map(e).filter(i);c?c.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(N)}function G(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(E.push(t),R||(R=!0,A.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,i,l,r,s,c,u,f=[-1]){const p=a;_(e);const m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:i.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:i.target||p.$$.root};u&&u(m.root);let g=!1;if(m.ctx=l?l(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return m.ctx&&s(m.ctx[t],m.ctx[t]=i)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](i),g&&H(e,t)),n})):[],m.update(),g=!0,o(m.before_update),m.fragment=!!r&&r(m.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();i.intro&&T(e.$$.fragment),B(e,i.target,i.anchor,i.customElement),C()}_(p)}class K{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function V(t,e){if(isNaN(t)||t<0)return e?"00:00":"0:00";const n=Math.floor(t/3600);let o=Math.floor(t/60)-60*n,i=Math.floor(t%60);return e&&o<10&&(o="0"+o),i<10&&(i="0"+i),n>0?n+":"+o+":"+i:o+":"+i}function W(t,e,n){const o=t.slice();return o[5]=e[n],o}function X(e){let n;return{c(){n=p("div"),n.textContent="Drag and drop, paste or click here to select a file/folder to play.",$(n,"class","font-size-24 font-weight-bold center text-center h-full pointer svelte-taw8gq")},m(t,e){f(t,n,e)},p:t,d(t){t&&d(n)}}}function Y(t){let e,n=t[1],o=[];for(let e=0;e<n.length;e+=1)o[e]=Z(W(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=m("")},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);f(t,e,n)},p(t,i){if(11&i){let l;for(n=t[1],l=0;l<n.length;l+=1){const r=W(t,n,l);o[l]?o[l].p(r,i):(o[l]=Z(r),o[l].c(),o[l].m(e.parentNode,e))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),t&&d(e)}}}function Z(t){let e,n,o,l,r,s,a,c,v,y,w,b,_,k=t[5]===t[0]?"volume_up":"play_arrow",O=t[5].name+"",E=V(t[5].duration)+"";return{c(){e=p("div"),n=p("div"),o=m(k),l=g(),r=p("div"),s=m(O),a=g(),c=p("div"),v=m(E),y=g(),$(n,"class","material-icons font-size-20 center pr-20 svelte-taw8gq"),$(r,"class","text-truncate"),$(c,"class","ml-auto pl-20"),$(e,"class",w="d-flex w-full pointer font-size-20 "+(t[5]===t[0]?"text-primary":"text-muted")+" svelte-taw8gq")},m(d,p){f(d,e,p),u(e,n),u(n,o),u(e,l),u(e,r),u(r,s),u(e,a),u(e,c),u(c,v),u(e,y),b||(_=h(e,"click",(function(){i(t[3](t[5]))&&t[3](t[5]).apply(this,arguments)})),b=!0)},p(n,i){t=n,3&i&&k!==(k=t[5]===t[0]?"volume_up":"play_arrow")&&x(o,k),2&i&&O!==(O=t[5].name+"")&&x(s,O),2&i&&E!==(E=V(t[5].duration)+"")&&x(v,E),3&i&&w!==(w="d-flex w-full pointer font-size-20 "+(t[5]===t[0]?"text-primary":"text-muted")+" svelte-taw8gq")&&$(e,"class",w)},d(t){t&&d(e),b=!1,_()}}}function tt(e){let n,o,i;function l(t,e){return t[1].length?Y:X}let r=l(e),s=r(e);return{c(){n=p("div"),s.c(),$(n,"class","col-md-5 bg-dark overflow-y-scroll h-half h-md-full p-20")},m(t,l){f(t,n,l),s.m(n,null),o||(i=h(n,"click",e[4]),o=!0)},p(t,[e]){r===(r=l(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&d(n),s.d(),o=!1,i()}}}function et(t,e,n){let{current:o}=e,{songs:i}=e;const l=k();return t.$$set=t=>{"current"in t&&n(0,o=t.current),"songs"in t&&n(1,i=t.songs)},[o,i,l,function(t){t!==o&&n(0,o=t)},()=>l("popup")]}class nt extends K{constructor(t){super(),J(this,t,et,tt,l,{current:0,songs:1})}}function ot(t){let e,n,i,l,r,a,v,y,_,k,O,E,L,z,A,R,j,M,C,q,F,S,H,J,K,W,X,Y,Z,tt,et,ot,it,lt,rt,st,at,ct,ut,ft,dt,pt,mt,gt,ht,vt,$t,yt,xt=!1,wt=!0,bt=t[8]?"play_arrow":"pause",_t=V(t[13],!0)+"",kt=V(t[2],!0)+"",Ot=t[9]?"volume_off":"volume_up",Et=t[10]?"repeat_one":"repeat",Pt=t[11]?"shuffle":"sort";function Lt(){cancelAnimationFrame(i),e.paused||(i=c(Lt),xt=!0),t[29].call(e)}function zt(e){t[32](e)}let At={songs:t[7]};return void 0!==t[1]&&(At.current=t[1]),k=new nt({props:At}),P.push((()=>I(k,"current",zt))),k.$on("popup",t[33]),{c(){e=p("audio"),l=g(),r=p("div"),a=p("div"),v=p("img"),_=g(),Q(k.$$.fragment),E=g(),L=p("nav"),z=p("div"),A=p("input"),R=g(),j=p("div"),M=p("div"),C=p("span"),C.textContent="skip_previous",q=g(),F=p("span"),S=m(bt),H=g(),J=p("span"),J.textContent="skip_next",K=g(),W=p("div"),X=m(_t),Y=m(" / "),Z=m(kt),tt=g(),et=p("div"),ot=p("div"),it=m(t[0]),lt=g(),rt=p("div"),st=p("input"),at=g(),ct=p("span"),ut=m(Ot),ft=g(),dt=p("span"),pt=m(Et),mt=g(),gt=p("span"),ht=m(Pt),s(e.src,n=t[4])||$(e,"src",n),e.autoplay=!0,e.loop=t[10],$(e,"class","svelte-nuis8t"),void 0===t[2]&&N((()=>t[28].call(e))),s(v.src,y=t[12])||$(v,"src",y),$(v,"alt","cover"),$(v,"class","shadow-lg pointer svelte-nuis8t"),$(a,"class","col-md-7 p-20 center h-half h-md-full bg-dark svelte-nuis8t"),$(r,"class","content-wrapper row overflow-hidden svelte-nuis8t"),$(A,"class","w-full top-0 svelte-nuis8t"),$(A,"type","range"),$(A,"min","0"),$(A,"max","1"),$(A,"step","any"),b(A,"--value",100*t[14]+"%"),$(z,"class","d-flex w-full prog svelte-nuis8t"),$(C,"class","material-icons font-size-20 ctrl pointer svelte-nuis8t"),$(C,"type","button"),$(F,"class","material-icons font-size-24 ctrl pointer svelte-nuis8t"),$(F,"type","button"),$(J,"class","material-icons font-size-20 ctrl pointer svelte-nuis8t"),$(J,"type","button"),$(W,"class","text-muted center ml-10 text-nowrap svelte-nuis8t"),$(M,"class","d-flex align-items-center svelte-nuis8t"),$(ot,"class","text-truncate text-muted svelte-nuis8t"),$(et,"class","center px-20 mw-0 svelte-nuis8t"),$(st,"class","ml-auto px-5 h-half svelte-nuis8t"),$(st,"type","range"),$(st,"min","0"),$(st,"max","1"),$(st,"step","any"),b(st,"--value",100*t[6]+"%"),$(ct,"class","material-icons font-size-20 ctrl pointer svelte-nuis8t"),$(ct,"type","button"),$(dt,"class","material-icons font-size-20 ctrl pointer svelte-nuis8t"),$(dt,"type","button"),$(gt,"class","material-icons font-size-20 ctrl pointer svelte-nuis8t"),$(gt,"type","button"),$(rt,"class","d-flex align-items-center svelte-nuis8t"),$(j,"class","d-flex w-full flex-grow-1 px-20 justify-content-between svelte-nuis8t"),$(L,"class","navbar navbar-fixed-bottom p-0 d-flex flex-column border-0 shadow-lg bg-dark-light svelte-nuis8t")},m(n,o){f(n,e,o),t[26](e),isNaN(t[6])||(e.volume=t[6]),e.muted=t[9],f(n,l,o),f(n,r,o),u(r,a),u(a,v),u(r,_),B(k,r,null),f(n,E,o),f(n,L,o),u(L,z),u(z,A),w(A,t[14]),u(L,R),u(L,j),u(j,M),u(M,C),u(M,q),u(M,F),u(F,S),u(M,H),u(M,J),u(M,K),u(M,W),u(W,X),u(W,Y),u(W,Z),u(j,tt),u(j,et),u(et,ot),u(ot,it),u(j,lt),u(j,rt),u(rt,st),w(st,t[6]),u(rt,at),u(rt,ct),u(ct,ut),u(rt,ft),u(rt,dt),u(dt,pt),u(rt,mt),u(rt,gt),u(gt,ht),vt=!0,$t||(yt=[h(e,"volumechange",t[27]),h(e,"durationchange",t[28]),h(e,"timeupdate",Lt),h(e,"play",t[30]),h(e,"pause",t[30]),h(e,"ended",t[31]),h(v,"click",t[19]),h(A,"change",t[34]),h(A,"input",t[34]),h(A,"mousedown",t[16]),h(A,"mouseup",t[17]),h(A,"input",t[18]),h(C,"click",t[23]),h(F,"click",t[19]),h(J,"click",t[22]),h(st,"change",t[35]),h(st,"input",t[35]),h(ct,"click",t[20]),h(dt,"click",t[21]),h(gt,"click",t[24])],$t=!0)},p(t,o){(!vt||16&o[0]&&!s(e.src,n=t[4]))&&$(e,"src",n),(!vt||1024&o[0])&&(e.loop=t[10]),64&o[0]&&!isNaN(t[6])&&(e.volume=t[6]),512&o[0]&&(e.muted=t[9]),!xt&&8&o[0]&&!isNaN(t[3])&&(e.currentTime=t[3]),xt=!1,256&o[0]&&wt!==(wt=t[8])&&e[wt?"pause":"play"](),(!vt||4096&o[0]&&!s(v.src,y=t[12]))&&$(v,"src",y);const i={};128&o[0]&&(i.songs=t[7]),!O&&2&o[0]&&(O=!0,i.current=t[1],U((()=>O=!1))),k.$set(i),(!vt||16384&o[0])&&b(A,"--value",100*t[14]+"%"),16384&o[0]&&w(A,t[14]),(!vt||256&o[0])&&bt!==(bt=t[8]?"play_arrow":"pause")&&x(S,bt),(!vt||8192&o[0])&&_t!==(_t=V(t[13],!0)+"")&&x(X,_t),(!vt||4&o[0])&&kt!==(kt=V(t[2],!0)+"")&&x(Z,kt),(!vt||1&o[0])&&x(it,t[0]),(!vt||64&o[0])&&b(st,"--value",100*t[6]+"%"),64&o[0]&&w(st,t[6]),(!vt||512&o[0])&&Ot!==(Ot=t[9]?"volume_off":"volume_up")&&x(ut,Ot),(!vt||1024&o[0])&&Et!==(Et=t[10]?"repeat_one":"repeat")&&x(pt,Et),(!vt||2048&o[0])&&Pt!==(Pt=t[11]?"shuffle":"sort")&&x(ht,Pt)},i(t){vt||(T(k.$$.fragment,t),vt=!0)},o(t){D(k.$$.fragment,t),vt=!1},d(n){n&&d(e),t[26](null),n&&d(l),n&&d(r),G(k),n&&d(E),n&&d(L),$t=!1,o(yt)}}}function it(t,e,n){let o,i;const l=k();let{name:r=""}=e,s=null,a=null,c=1,{files:u=[]}=e,f=null,d=[],p=-1,m=0,g=!0,h=!1,v=!1,$=!0,x=!1,w="./512.png";async function b(t){if(t.length){_(t.find((t=>0===t.type.indexOf("image"))));const e=t.filter((t=>0===t.type.indexOf("audio")));e&&(n(7,d=[]),n(1,f=null));const o=e.map((t=>new Promise((e=>{let n=document.createElement("audio");n.preload="metadata",n.onloadedmetadata=()=>{e({file:t,duration:n.duration,name:t.name.substring(0,t.name.lastIndexOf("."))||t.name}),URL.revokeObjectURL(n.src),n=null},n.src=t.url||URL.createObjectURL(t)}))));n(7,d=(await Promise.all(o)).sort(((t,e)=>t.file.name>e.file.name?1:e.file.name>t.file.name?-1:0))),n(1,f=d[0])}}function _(t){w&&URL.revokeObjectURL(w),n(12,w=t?t.url||URL.createObjectURL(t):"./512.png")}function O(){n(1,f=d[(d.indexOf(f)+1)%d.length])}return t.$$set=t=>{"name"in t&&n(0,r=t.name),"files"in t&&n(25,u=t.files)},t.$$.update=()=>{var e;33554432&t.$$.dirty[0]&&b(u),12&t.$$.dirty[0]&&n(14,o=m/p),8&t.$$.dirty[0]&&n(13,i=m),2&t.$$.dirty[0]&&(e=f,s&&URL.revokeObjectURL(s),e?(n(4,s=e.file.url||URL.createObjectURL(e.file)),n(0,r=e.name)):(n(4,s=null),n(0,r="")))},[r,f,p,m,s,a,c,d,g,h,v,x,w,i,o,l,function({target:t}){$=g,n(8,g=!0),n(13,i=t.value*p)},function(){n(8,g=$),n(3,m=i)},function({target:t}){n(13,i=t.value*p)},function(){n(8,g=!g)},function(){n(9,h=!h)},function(){n(10,v=!v)},O,function(){const t=d.indexOf(f);n(1,f=d[0===t?d.length-1:t-1])},function(){n(11,x=!x),n(7,d=x?d.sort((()=>.5-Math.random())):d.sort(((t,e)=>t.file.name>e.file.name?1:e.file.name>t.file.name?-1:0)))},u,function(t){P[t?"unshift":"push"]((()=>{a=t,n(5,a)}))},function(){c=this.volume,h=this.muted,n(6,c),n(9,h)},function(){p=this.duration,n(2,p)},function(){m=this.currentTime,n(3,m)},function(){g=this.paused,n(8,g)},()=>!v&&O(),function(t){f=t,n(1,f)},()=>l("popup"),function(){o=y(this.value),n(14,o),n(3,m),n(2,p)},function(){c=y(this.value),n(6,c)}]}class lt extends K{constructor(t){super(),J(this,t,it,ot,l,{name:0,files:25},null,[-1,-1])}}const{document:rt,window:st}=S;function at(t){let e,n,i,l,r,s,a,c,u;function m(e){t[9](e)}function y(e){t[10](e)}let x={};return void 0!==t[0]&&(x.name=t[0]),void 0!==t[1]&&(x.files=t[1]),n=new lt({props:x}),P.push((()=>I(n,"name",m))),P.push((()=>I(n,"files",y))),n.$on("popup",t[4]),rt.title=s=t[0]||"Audio Player",{c(){e=p("div"),Q(n.$$.fragment),r=g(),$(e,"class","page-wrapper with-navbar-fixed-bottom svelte-9sfuxi")},m(o,i){f(o,e,i),B(n,e,null),f(o,r,i),a=!0,c||(u=[h(st,"drop",v(t[2])),h(st,"dragenter",v(t[5])),h(st,"dragover",v(t[6])),h(st,"dragstart",v(t[7])),h(st,"dragleave",v(t[8])),h(st,"paste",v(t[3]))],c=!0)},p(t,[e]){const o={};!i&&1&e&&(i=!0,o.name=t[0],U((()=>i=!1))),!l&&2&e&&(l=!0,o.files=t[1],U((()=>l=!1))),n.$set(o),(!a||1&e)&&s!==(s=t[0]||"Audio Player")&&(rt.title=s)},i(t){a||(T(n.$$.fragment,t),a=!0)},o(t){D(n.$$.fragment,t),a=!1},d(t){t&&d(e),G(n),t&&d(r),c=!1,o(u)}}}const ct=/\.(3gp|3gpp|3g2|aac|adts|ac3|amr|eac3|flac|mp3|m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|oga|ogg|mogg|spx|opus|raw|wav|weba)$/i;function ut(t,e,n){const o=(new DOMParser).parseFromString.bind(new DOMParser);let i,l="";async function r(t){const e=t.map((t=>{if(0===t.type.indexOf("audio")||0===t.type.indexOf("image"))return t.getAsFile();if("text/plain"===t.type)return new Promise((e=>t.getAsString((t=>{if(ct.test(t)){const n=t.substring(Math.max(t.lastIndexOf("\\"),t.lastIndexOf("/"))+1),o=n.substring(0,n.lastIndexOf("."))||n;e({name:o,url:t,type:"audio/"})}e()}))));if("text/html"===t.type)return new Promise((e=>t.getAsString((t=>{const n=o(t,"text/html").querySelectorAll("audio");n.length&&e(n.map((t=>t?.src))),e()}))));if(!t.type){let e=t.webkitGetAsEntry();return e=e.isDirectory&&e,e?new Promise((t=>{e.createReader().readEntries((async e=>{const n=e.filter((t=>t.isFile)).map((t=>new Promise((e=>t.file(e)))));t(await Promise.all(n))}))})):void 0}}));n(1,i=(await Promise.all(e)).flat().filter((t=>t)))}return"launchQueue"in window&&launchQueue.setConsumer((async t=>{if(!t.files.length)return;const e=t.files.map((t=>t.getFile()));n(1,i=(await Promise.all(e)).filter(((t,e,n)=>n.findIndex((e=>e.name===t.name&&e.size===t.size&&e.lastModified===t.lastModified))===e))),console.log(i)})),[l,i,function({dataTransfer:t}){const{items:e}=t;r([...e])},function({clipboardData:t}){const{items:e}=t;r([...e])},function(){if(!i.length){let t=document.createElement("input");t.type="file",t.multiple="multiple",t.onchange=({target:e})=>{n(1,i=[...e.files]),t=null},t.click()}},function(e){O.call(this,t,e)},function(e){O.call(this,t,e)},function(e){O.call(this,t,e)},function(e){O.call(this,t,e)},function(t){l=t,n(0,l)},function(t){i=t,n(1,i)}]}return new class extends K{constructor(t){super(),J(this,t,ut,at,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
